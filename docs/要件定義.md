要件定義書：RRFull

## 1. プロダクト概要・背景

**名称**: RRFull（Rails × React Fullstack Realtime Communication App）

**概要**:

RRFullは、2名のユーザーがスマートフォンを介して**対面でコミュニケーションする際の心理的・身体的状態をリアルタイムで共有**できるWebアプリケーションです。画面遷移、タイマー、心理状態、数値の変化などを双方向に同期させることで、相互理解と共感を促進します。

**目的**:

- 言語に頼らず感情・状態を共有できる手段の提供

- 非言語的な意思疎通の促進（ペアワーク・対話支援・セラピー補助など）

- 双方向かつリアルタイムなUI/UXの学習および技術検証

- レスポンシブかつ、スマートフォンで読み込めればOKです。

- プログラミング初学者のわたしが、段階的にコーディングされていくのを見てどのように記述したらいいのかわかるようにしてほしい。

  

------

## 2. 想定ユーザーとユースケース

### 想定ユーザー

- 対面で対話・共同作業を行う2人のユーザー（例：恋人、コーチとクライアント、家族、カウンセラーと来談者）
- スマートフォンを使用し、互いに異なる画面を見ながら、連動した体験を行いたいユーザー

### ユースケース

- セッション前に両者が同じセッションIDを入力して参加
- セッション中、片方が操作した「タイマー開始」や「心理状態変更」がもう一方に即座に反映される
- カウンターをタップすることで「共感ポイント」などの数値が2人の間で同期・表示される
- 画面遷移（例：タイマー → 結果共有画面）も連動する

------

## 3. 機能一覧

### 🌟 必須機能

| 機能カテゴリ   | 機能概要                                                     |
| -------------- | ------------------------------------------------------------ |
| ユーザー認証   | Devise + JWT によるAPI認証（新規登録 / ログイン / ログアウト） |
| セッション管理 | セッションIDによる2人用ルーム作成・参加                      |
| タイマー共有   | 一方の「開始」操作がもう一方に即反映され、同時にカウント開始 |
| 心理状態共有   | 選択した感情（例：😊😓）を相手にリアルタイム送信・表示         |
| カウンター同期 | 「♡」などのアクションで数値を共有し、同時に画面表示を更新    |
| 画面遷移同期   | 同じセッション内の画面遷移を共有（例：共にリザルト画面へ）   |
| WebSocket通信  | Action Cable による双方向リアルタイム通信（状態同期）`<200 ms` を目標値／`<500 ms` を許容値として設定 |

### 🧩 任意・将来的な拡張機能（検討中）

| 機能カテゴリ       | 機能概要                                           |
| ------------------ | -------------------------------------------------- |
| メッセージ送信     | テキストチャットの追加                             |
| ステータスログ     | 心理状態や行動の履歴を自動保存                     |
| セッションレポート | 終了時に感情の推移やアクション数などをグラフで表示 |

------

## 4. 画面設計（概要）

### 1. ログイン / サインアップ画面

- メールアドレス、パスワードを入力
- JWT認証によるセッション開始

### 2. セッション参加画面

- セッションIDの入力欄
- 「参加」ボタンを押すと同じIDのルームへ遷移

### 3. メインセッション画面

- 上部にユーザー名とセッションID表示
- 中央に：
  - ⏱ 共有タイマー（開始・停止ボタン）
  - 💬 感情アイコン選択パネル（😊🤔😓⏸）
  - ❤️ カウンター（♡を押すとリアルタイムに増える）
- フッターに：画面遷移ボタン（例：終了・リザルト）

### 4. 結果画面（任意）

- セッション中の統計（滞在時間、カウント回数、心理状態変化など）
- 再セッション・ログアウトボタン